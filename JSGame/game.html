<!DOCTYPE html>
<title>Bub's Dungeon</title>

<style>
	canvas{
		outline: 3px solid gray;
	}

	body{
		background-color: black;
		text-align: center;
		margin-top: 50px;
		color: white;
	}
</style>
<canvas></canvas>
<script src="js/game.js"></script>
<script src="js/map.js"></script>
<script src="js/tile.js"></script>
<script src="js/monster.js"></script>
<script src="js/util.js"></script>
<script src="js/spell.js"></script>
<script>
	tileSize = 64;
	numTiles = 12;
	uiWidth = 4;
	level = 1;

	spritesheet = new Image();
	spritesheet.src = 'spritesheet.png';
	spritesheet.onload = showTitle;

	gameState = "loading";

	startingHp = 3;
	numLevels = 8;
	maxHp = 6;

	document.querySelector("html").onkeypress = function(e) {
		if(gameState == "title"){
			startGame()
		}else if(gameState == "dead"){
			showTitle();
		}else if(gameState == "running"){
			if(e.key=="w") player.tryMove(0, -1);
	        if(e.key=="s") player.tryMove(0, 1);
	        if(e.key=="a") player.tryMove(-1, 0);
	        if(e.key=="d") player.tryMove(1, 0);
	        if(e.key=="q") spells.WOOP();
	        if(e.key=="e") spells.HEAL();
		}
	};


	setInterval(draw, 15);

	setupCanvas(Image);
</script>

<p>Controls: WASD, Q to sacrifice all hearts but 1 in exchange for being teleported to a random location, E to heal for 20 gold.</p>